<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Documented recipe with all features · DataCurator Documentation</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="DataCurator Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit">DataCurator Documentation</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Index</a></li><li><a class="tocitem" href="installation.html">Installation</a></li><li class="is-active"><a class="tocitem" href="documented_recipe.html">Documented recipe with all features</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#is-the-same-as"><span>is the same as</span></a></li><li class="toplevel"><a class="tocitem" href="#is-the-same-as-2"><span>is the same as</span></a></li><li><a class="tocitem" href="#Under-the-hood"><span>Under the hood</span></a></li></ul></li><li><a class="tocitem" href="toc.html">Table of Contents</a></li><li><a class="tocitem" href="reference.html">API Reference</a></li><li><a class="tocitem" href="conditions.html">Conditions and Actions for use in recipes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="documented_recipe.html">Documented recipe with all features</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="documented_recipe.html">Documented recipe with all features</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/bencardoen/DataCurator.jl/blob/master/docs/src/documented_recipe.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="A-recipe-using-all/most-of-the-possible-features"><a class="docs-heading-anchor" href="#A-recipe-using-all/most-of-the-possible-features">A recipe using all/most of the possible features</a><a id="A-recipe-using-all/most-of-the-possible-features-1"></a><a class="docs-heading-anchor-permalink" href="#A-recipe-using-all/most-of-the-possible-features" title="Permalink"></a></h1><p>First, a recipe is a plain text file, in TOML format, designed to be as human friendly as possible.</p><p>We&#39;ll run through all, or most of the features you can use, with example TOML snippets.</p><p>Any <code>recipe</code> needs 2 parts, the global configuration, and the actual template.</p><p>The global configuration specifies <strong>how</strong> the template is applied, the template specifies the conditions/rules to apply, i.o.w. the <strong>what</strong> and <strong>when</strong>.</p><p>A <em>section</em> in a TOML file is simply:</p><pre><code class="language-toml">[mysectionname]
mycontent=&quot;some value&quot;</code></pre><h3 id="Global-section"><a class="docs-heading-anchor" href="#Global-section">Global section</a><a id="Global-section-1"></a><a class="docs-heading-anchor-permalink" href="#Global-section" title="Permalink"></a></h3><pre><code class="language-toml">[global]</code></pre><p>All a minimum global section needs is where to start:</p><pre><code class="language-toml">inputdirectory=&quot;your/directory&quot;</code></pre><p>Next, we can either act on failure (usually in validation), or on success. This simply means that, if set to false, we check for any data that <strong>fails</strong> the rule you specify, then execute your actions. In datacuration you&#39;ll want the inverse, namely, act on success.</p><div class="admonition is-success"><header class="admonition-header">You can have your cake and eat it</header><div class="admonition-body"><p>You can specify <code>actions</code> AND <code>counter_actions</code>, allowing you to specify what to do if a rule applies, and what if it doesn&#39;t. In other words, you have maximal freedom of expression.</p></div></div><pre><code class="language-toml">act_on_success=false # default</code></pre><p>We can also specify how we traverse data, from the deepest to the top (<code>bottomup</code>), or <code>topdown</code>. If you intend to modify files/directories in place, <code>bottomup</code> is the safer option.</p><pre><code class="language-toml">traversal=&quot;bottomup&quot; # or topdown</code></pre><p>We can validate or curate data in parallel, to maximize throughput. Especially on computing clusters this can speed up completion time. If true, will use as many threads as JULIA_NUM_THREADS (usually nr of HT cores).</p><div class="admonition is-info"><header class="admonition-header">Thread safety</header><div class="admonition-body"><p>You do not need to worry about <code>data races</code>, where you get non-deterministic or corrupt results, if you stick to our conditions and aggregations, there are no conflicts between threads.</p></div></div><pre><code class="language-toml">parallel=true #default false</code></pre><p>By default your rules are applied without knowing how deep your are in your dataset. However, at times you will need to know this, for example, to verify that certain files only appear in certain locations, or check naming patterns of directories. For example, a path like <code>top/celltype/cellnr</code> will have a rule to check for a cell number (integer) at level 3, not anywhere else. To enable this:</p><pre><code class="language-toml"># If true, your template is more precise, because you know what to look for at certain levels [level_i]
# If false, define your template in [any]
hierarchical=true</code></pre><p>For more complex pattern matching you may want to use Regular Expressions (regex), to enable this:</p><pre><code class="language-toml"># If true, functions accepting patterns (endswith, startswith), will have their argument converted to a regular expression (using PRCE syntax)
regex = false</code></pre><h4 id="Aggregation"><a class="docs-heading-anchor" href="#Aggregation">Aggregation</a><a id="Aggregation-1"></a><a class="docs-heading-anchor-permalink" href="#Aggregation" title="Permalink"></a></h4><p>Aggregation is a complex word for use case like:</p><ul><li>counting certain files</li><li>counting total size of a selection of files</li><li>making lists of input/output pairs for pipelines</li><li>combining 2D images into 1 3D image</li><li>selecting specific columns from each csv you find, and fusing all in 1 table</li><li>...</li></ul><p>You can do any of these all at the same time with <code>counters</code> and <code>file_lists</code> in the global section:</p><h6 id="Counters"><a class="docs-heading-anchor" href="#Counters">Counters</a><a id="Counters-1"></a><a class="docs-heading-anchor-permalink" href="#Counters" title="Permalink"></a></h6><pre><code class="language-toml">counters = [&quot;C1&quot;, [&quot;C2&quot;, &quot;size_of_file&quot;]]</code></pre><p>Here we created 2 counters, one that is incremented whenever you refer to it, and one that when you pass it a fily, records it total size in bytes. When the program finishes, these counters are printed.</p><h6 id="Files-to-process"><a class="docs-heading-anchor" href="#Files-to-process">Files to process</a><a id="Files-to-process-1"></a><a class="docs-heading-anchor-permalink" href="#Files-to-process" title="Permalink"></a></h6><p>The simplest kind just adds a file each time you refer to it, and writes them out in traversal order (per thread if parallel) at the end to &quot;infiles.txt&quot;</p><pre><code class="language-toml">file_lists = [&quot;infiles&quot;]</code></pre><p>To make input-output pairs you&#39;d do</p><pre><code class="language-toml">file_lists = [&quot;infiles&quot;, [&quot;outfiles&quot;, &quot;outputpath&quot;]]</code></pre><p>Let&#39;s say we add a file &quot;a/b/c.txt&quot; to infiles, when we add it to outfiles it will be recorded as: &quot;/outputpath/a/b/c.txt&quot; This is a common use case in preparing large batch scripts on SLURM clusters.</p><h5 id="Image-aggregation"><a class="docs-heading-anchor" href="#Image-aggregation">Image aggregation</a><a id="Image-aggregation-1"></a><a class="docs-heading-anchor-permalink" href="#Image-aggregation" title="Permalink"></a></h5><h6 id="Stacking-2D-images"><a class="docs-heading-anchor" href="#Stacking-2D-images">Stacking 2D images</a><a id="Stacking-2D-images-1"></a><a class="docs-heading-anchor-permalink" href="#Stacking-2D-images" title="Permalink"></a></h6><pre><code class="language-toml">file_lists = [{name=&quot;3dstack.tif&quot;, aggregator=&quot;stack_images&quot;}]</code></pre><h6 id="Maximum-projection-of-3D-images-along-the-Y-axis,-then-stack-them."><a class="docs-heading-anchor" href="#Maximum-projection-of-3D-images-along-the-Y-axis,-then-stack-them.">Maximum projection of 3D images along the Y axis, then stack them.</a><a id="Maximum-projection-of-3D-images-along-the-Y-axis,-then-stack-them.-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-projection-of-3D-images-along-the-Y-axis,-then-stack-them." title="Permalink"></a></h6><pre><code class="language-toml">file_lists = [{name=&quot;3dstack.tif&quot;, transformer=[&quot;reduce_images&quot;, [&quot;maximum&quot;, 2]],aggregator=&quot;stack_images&quot;}]</code></pre><p>And so on ...</p><h5 id="Table-aggregation"><a class="docs-heading-anchor" href="#Table-aggregation">Table aggregation</a><a id="Table-aggregation-1"></a><a class="docs-heading-anchor-permalink" href="#Table-aggregation" title="Permalink"></a></h5><pre><code class="language-toml">file_lists = [{name=&quot;all_ab_columns.csv&quot;, transformer=[&quot;extract_columns&quot;, [&quot;A&quot;, &quot;B&quot;]], aggregator=&quot;concat_to_table&quot;}]</code></pre><p>...</p><h3 id="Template"><a class="docs-heading-anchor" href="#Template">Template</a><a id="Template-1"></a><a class="docs-heading-anchor-permalink" href="#Template" title="Permalink"></a></h3><p>A template has 2 kind of entries <code>[any]</code> and <code>[level_X]</code>. You will only see the level_X entries in hierarchical templates, then X specifies at which depth you want to check a rule.</p><h4 id="Flat-templates,-the-Any-section"><a class="docs-heading-anchor" href="#Flat-templates,-the-Any-section">Flat templates, the Any section</a><a id="Flat-templates,-the-Any-section-1"></a><a class="docs-heading-anchor-permalink" href="#Flat-templates,-the-Any-section" title="Permalink"></a></h4><pre><code class="language-toml">[any]
all=false #default, if true, fuses all conditions and actions. If false, you list condition-action pairs.
conditions=[&quot;is_tif_file&quot;, [&quot;has_n_files&quot;, 10]]
actions=[&quot;show_warning&quot;, [&quot;log_to_file&quot;, &quot;decathlon.txt&quot;]]
counter_actions=[[&quot;add_to_file_list&quot;, &quot;mylist&quot;], [&quot;log_to_file&quot;, &quot;not_decathlon.txt&quot;]] ## Optional</code></pre><p>Here the <code>add_to_file_list</code> will pass any file or directory for which <code>is_tif_file</code> = true (see <code>act_on_success</code>) to a list you defined earlier called &quot;mylist&quot;. You specified in the global section what needs to be done with those files at the end. You do not need counter_actions.</p><div class="admonition is-success"><header class="admonition-header">Negation and logical and</header><div class="admonition-body"><p>You can also negate and fuse conditions/actions. Actions can not be negated.</p><pre><code class="language-toml">conditions=[[&quot;not&quot;, &quot;is_tif_file&quot;], [&quot;all&quot;, &quot;is_2d_img&quot;, &quot;is_rgb&quot;]]]</code></pre><p>This is useful if you want to check for multiple things, but each can be quite complex. In other words, you want pairs of condition-action, so all=false, yet each pair is a complex rule.</p></div></div><h4 id="Hierarchical-templates,-with-level_X"><a class="docs-heading-anchor" href="#Hierarchical-templates,-with-level_X">Hierarchical templates, with <code>level_X</code></a><a id="Hierarchical-templates,-with-level_X-1"></a><a class="docs-heading-anchor-permalink" href="#Hierarchical-templates,-with-level_X" title="Permalink"></a></h4><p>All you now need to add is what to do at level &#39;X&#39;</p><pre><code class="language-toml">[global]
hierarchical=true
...
[level_3]
conditions=...
actions=...
...</code></pre><p>This will only be applied if, and only if, files and directories 3 levels (directories) deep are encountered.</p><p>Sometimes you do not know how deep your dataset can be, in that case you&#39;ll want a &#39;catch-all&#39;, in hierarchical templates this is now the role of <code>any</code></p><pre><code class="language-toml">[global]
act_on_success=true
[any]
conditions=[&quot;is_csv_file&quot;]
actions=[&quot;show_warning&quot;]
[level_3]
conditions=[&quot;is_tif_file&quot;, &quot;is_csv_file&quot;]
actions=[[&quot;log_to_file&quot;, &quot;tiffiles.txt&quot;], &quot;show_warning&quot;]</code></pre><p>This tiny template will write any tif file to tiffiles.txt. If it encounters csv files anywhere else, it will warn you.</p><p>Please see the directory <a href="../../example_recipes">example_recipes</a> for more complex examples.</p><h3 id="Advanced-usage"><a class="docs-heading-anchor" href="#Advanced-usage">Advanced usage</a><a id="Advanced-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-usage" title="Permalink"></a></h3><h5 id="Verify-a-complex,-deep-dataset-layout."><a class="docs-heading-anchor" href="#Verify-a-complex,-deep-dataset-layout.">Verify a complex, deep dataset layout.</a><a id="Verify-a-complex,-deep-dataset-layout.-1"></a><a class="docs-heading-anchor-permalink" href="#Verify-a-complex,-deep-dataset-layout." title="Permalink"></a></h5><p>This is the same as the Julia API equivalent below, but then in toml recipe</p><pre><code class="language-toml">  [global]
  act_on_success=false
  hierarchical=true
  inputdirectory = &quot;inputdirectory&quot;
  ## Suppose we expect 2 3D channels (tif) for each cell, and we have a dataset like
  ## Root
  ###  Replicatenr
  ####  Celltype
  #####  Series cellnr
  ######  ...[1,2].tif

  # For now we just want a warning when the data does not like it should be

  ## If we see anything else than the structure below, complain
  [any]
  conditions=[&quot;never&quot;]
  actions = [&quot;show_warning&quot;]
  ## Top directory, only sub directories
  [level_1]
  conditions=[&quot;isdir&quot;]
  actions = [&quot;show_warning&quot;]
  ## Replicate directory, should be an integer
  [level_2]
  all=true
  conditions=[&quot;isdir&quot;, &quot;integer_name&quot;]
  actions = [&quot;show_warning&quot;]
  ## We don&#39;t care what cell types are named, as long as there&#39;s not unexpected data
  [level_3]
  conditions=[&quot;isdir&quot;]
  actions = [&quot;show_warning&quot;]
  ## Final level, directory with 2 files, and should end with cell nr
  [level_4]
  all=true
  conditions=[&quot;isdir&quot;, [&quot;has_n_files&quot;, 2], [&quot;ends_with_integer&quot;]]
  actions = [&quot;show_warning&quot;]
  ## The actual files, we complain if there&#39;s any subdirectories, or if the files are not 3D
  [level_5]
  all=true
  conditions=[&quot;is_3d_img&quot;, [&quot;endswith&quot;, &quot;[1,2].tif&quot;]]
  actions = [&quot;show_warning&quot;]
  ```
##### Early exit:
sometimes you want the validation or processing to stop immediately based on a condition, e.g. finding corrupt data, or because you&#39;re just looking for 1 specific type of conditions. This can be achieved fairly easily, illustrated with a trivial example that stops after finding something other than .txt files.
  ```toml
  [global]
  act_on_success = false
  inputdirectory = &quot;testdir&quot;
  [any]
  all = true
  conditions = [&quot;isfile&quot;, [&quot;endswith&quot;, &quot;.txt&quot;]]
  actions = [&quot;halt&quot;]
  ```
##### Regular expressions:
For more advanced users, when you write &quot;startswith&quot; &quot;*.txt&quot;, it will not match anything, because by default regular expressions are disabled. Enabling them is easy though
  ```toml
  [global]
  regex=true
  ...
  condition = [&quot;startswith&quot;, &quot;[0-9]+&quot;]
  ```
  This will now match files with 1 or more integers at the beginning of the file name. **Note** If you try to pass a regex such as *.txt, you&#39;ll get an error complaining about PCRE not being able to compile your Regex. The reason for this is the lookahead/lookback functionality in the Regex engine not allowing such wildcards at the beginning of a regex. When you write *.txt, what you probably meant was &#39;anything with extension txt&#39;, but not the name &quot;.txt&quot;, which &quot; *.txt &quot; will also match. Instead, use &quot;\.\*.txt&quot;. When in doubt, don&#39;t use a regex if you can avoid it. Similar to Kruger-Dunning, those who believe they can wield a regex with confidence, probably shouldn&#39;t.

##### Negating conditions:
By default your conditions are &#39;OR&#39;ed, and by setting all=yes, you have &#39;AND&#39;. By flipping action_on_succes you can negate all conditions. So in essence you don&#39;t need more than that for all combinations, but if you need to specifically flip 1 condition, this will get messy. Instead, you can negate any condition by giving it a prefix argumet of &quot;not&quot;.
  ```toml
  [global]
  act_on_success = true
  inputdirectory = &quot;testdir&quot;
  regex=true
  [any]
  all=true
  conditions = [&quot;isfile&quot;, [&quot;not&quot;, &quot;endswith&quot;, &quot;.*.txt&quot;]]
  actions = [[&quot;flatten_to&quot;, &quot;outdir&quot;], &quot;show_warning&quot;]
  ```

##### Counteractions:
When you&#39;re validating you&#39;ll want to warn/log invalid files/folders. But at the same time, you may want to do the actual preprocessing as well. This is where counteractions come in, they allow you to specify
  - Do x when condition = true
  - Do y when condition = false
  A simple example, filtering by file type:
  ```toml
  [global]
  act_on_success=true
  inputdirectory = &quot;testdir&quot;
  [any]
  conditions=[&quot;is_csv_file&quot;]
  actions=[[&quot;log_to_file&quot;, &quot;csvs.txt&quot;]]
  counter_actions = [[&quot;log_to_file&quot;, &quot;non_csvs.txt&quot;]]
  ```
  or another use case is deleting a file that&#39;s incorrect, while transforming correct files in preparation for a pipeline, in 1 step.

##### Export to HDF5/MAT
  ```toml
  [global]
  act_on_success=true
  inputdirectory = &quot;testdir&quot;
  [any]
  conditions = [&quot;is_tif_file&quot;, &quot;is_csv_file&quot;]
  actions=[[&quot;add_to_hdf5&quot;, &quot;img.hdf5&quot;], [&quot;add_to_mat&quot;, &quot;csv.mat&quot;]]
  ```

## Modifying files and content
When you want precise control over what function runs on the content, versus the name of files, you can do so.
This example finds all 3D tif files, does a median projection along Z, then masks (binarizes) the image as a copy with original filename in lowercase.</code></pre><p>toml [global] act<em>on</em>success=true inputdirectory = &quot;testdir&quot; [any] conditions=[&quot;is<em>3d</em>img&quot;] actions=[{name<em>transform=[&quot;tolowercase&quot;], content</em>transform=[[&quot;reduce_image&quot;, [&quot;maximum&quot;, 2]], &quot;mask&quot;], mode=&quot;copy&quot;}]</p><pre><code class="language-none">The examples so far use `syntactic sugar`, they&#39;re shorter ways of writing the below, but in certain case where you need to get a lot done, this full syntax is more descriptive, and less error prone.
It also gives DataCurator the opportunity to save otherwise excessive intermediate copies.

The full syntax for actions of this kind:</code></pre><p>toml actions=[{name<em>transform=[entry+], content</em>transform=[entry+], mode=&quot;copy&quot; | &quot;move&quot; | &quot;inplace&quot;}+]</p><pre><code class="language-none">Where `entry` is any set of functions with arguments. The + sign indicates &quot;one or more&quot;.
The | symbol indicates &#39;OR&#39;, e.g. either copy, move, or inplace.

### Aggregation &lt;a name=&quot;mapreduce&quot;&gt;&lt;/a&gt;
When you need group data before processing it, such as collecting files to count their size, write input-output pairs, or stack images, and so forth, you&#39;re performing a pattern of the form</code></pre><p>julia output = reduce(aggregator, map(transform, filter(test, data)))</p><pre><code class="language-none">Sounds complex, but it&#39;s intuitive, you
- collect data based on some condition (filter)
- transform it in some way (e.g. mask images, copy, ...)
- group the output and reduce it (all filenames to 1 file, ...)

Examples of this use case:
- Collect all CSV files, concat to 1 table
- Collect columns &quot;x2&quot; and &quot;x3&quot; of CSV files whose name contains &quot;infected_C19&quot;, and concat to 1 table
- Collect all 2D images, and save to 1 3D stack
- Collect all 3D images, and save maximum/minimum/mean/median projection

The 2nd example is simply:</code></pre><p>toml [global] ... file<em>lists=[{name=&quot;group&quot;, transformer=[&quot;extract</em>columns&quot;, [&quot;x2&quot;, &quot;x3&quot;]], aggregator=&quot;concat<em>to</em>table&quot;}] ... [any] all=true conditions=[&quot;is<em>csv</em>file&quot;, [&quot;contains&quot;, &quot;infected<em>C19&quot;]] actions=[[&quot;add</em>to<em>file</em>list&quot;, &quot;group&quot;]]</p><pre><code class="language-none">
#### The maximum projection of 2D images
</code></pre><p>toml [global] ... file<em>lists=[{name=&quot;group&quot;, aggregator=[&quot;reduce</em>images&quot;, &quot;maximum&quot;]}] ... [any] conditions=[&quot;is<em>2d</em>img&quot;] actions=[[&quot;add<em>to</em>file_list&quot;, &quot;group&quot;]]</p><pre><code class="language-none">
#### The complete grammar:

</code></pre><p>toml file<em>lists=[{name=name, transformer=identity, aggregator=shared</em>list<em>to</em>file}+]</p><pre><code class="language-none">(X+) indicates at least one of X

The following aliases save you typing:</code></pre><p>toml file_lists=[&quot;name&quot;]</p><h1 id="is-the-same-as"><a class="docs-heading-anchor" href="#is-the-same-as">is the same as</a><a id="is-the-same-as-1"></a><a class="docs-heading-anchor-permalink" href="#is-the-same-as" title="Permalink"></a></h1><p>file<em>lists=[{name=name, transformer=identity, aggregator=shared</em>list<em>to</em>file}]</p><pre><code class="language-none"></code></pre><p>toml file<em>lists=[[&quot;name&quot;, &quot;some</em>directory&quot;]]</p><h1 id="is-the-same-as-2"><a class="docs-heading-anchor" href="#is-the-same-as-2">is the same as</a><a class="docs-heading-anchor-permalink" href="#is-the-same-as-2" title="Permalink"></a></h1><p>file<em>lists=[{name=name, transformer=change</em>path, aggregator=shared<em>list</em>to_file}] ```</p><p>You&#39;re free to specify as many aggregators as you like.</p><h2 id="Under-the-hood"><a class="docs-heading-anchor" href="#Under-the-hood">Under the hood</a><a id="Under-the-hood-1"></a><a class="docs-heading-anchor-permalink" href="#Under-the-hood" title="Permalink"></a></h2><p>When you define a template, a &#39;visitor&#39; will walk over each &#39;node&#39; in the filesystem graph, testing any conditions when appropriate, and executing actions or counteractions. <img src="concept.png" alt="Concept"/></p><p>In the background there&#39;s a lot more going on</p><ul><li>Managing threadsafe data structures</li><li>Resolving counters and file lists</li><li>Looking up functions</li><li>Composing functions and conditions</li><li>...</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="installation.html">« Installation</a><a class="docs-footer-nextpage" href="toc.html">Table of Contents »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 5 April 2022 16:59">Tuesday 5 April 2022</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
