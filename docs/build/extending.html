<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Using Python or R code · DataCurator Documentation</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="DataCurator Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">DataCurator Documentation</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Index</a></li><li><a class="tocitem" href="installation.html">Installation</a></li><li><a class="tocitem" href="usage.html">Quikstart</a></li><li><a class="tocitem" href="recipe.html">Documented recipe with all features demonstrated</a></li><li><a class="tocitem" href="conditions.html">Conditions and Actions for use in recipes</a></li><li><a class="tocitem" href="remote.html">Remote configuration</a></li><li class="is-active"><a class="tocitem" href="extending.html">Using Python or R code</a></li><li><a class="tocitem" href="reference.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="extending.html">Using Python or R code</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="extending.html">Using Python or R code</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/bencardoen/DataCurator.jl/blob/main/docs/src/extending.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Using-R-and-Python-code"><a class="docs-heading-anchor" href="#Using-R-and-Python-code">Using R and Python code</a><a id="Using-R-and-Python-code-1"></a><a class="docs-heading-anchor-permalink" href="#Using-R-and-Python-code" title="Permalink"></a></h1><p>Using existing Python or R code arguably could not be simpler:</p><pre><code class="language-toml hljs">actions=[&quot;python.meshio.read&quot;, &quot;R.base.sum&quot;]</code></pre><h3 id="Using-Python-packages/code"><a class="docs-heading-anchor" href="#Using-Python-packages/code">Using Python packages/code</a><a id="Using-Python-packages/code-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Python-packages/code" title="Permalink"></a></h3><p>Let&#39;s say you have an existing python module which you want to use in the template. In this example, we&#39;ll use <code>meshio</code>. We want to use the function <code>meshio.read(filename)</code></p><pre><code class="language-julia hljs">using DataCurator, PyCall, Conda
Conda.add(&quot;meshio&quot;, channel=&quot;conda-forge&quot;)</code></pre><p>Now you can do in a template</p><pre><code class="language-toml hljs">actions=[&quot;python.meshio.read&quot;]</code></pre><p>You can check if code is picked up</p><pre><code class="language-julia hljs">p=lookup(&quot;python.meshio.read&quot;)
isnothing(p) ## Should be false</code></pre><p>This works thanks to <a href="https://github.com/JuliaPy/PyCall.jl">PyCall.jl and Conda.jl</a></p><h4 id="Note-on-installing"><a class="docs-heading-anchor" href="#Note-on-installing">Note on installing</a><a id="Note-on-installing-1"></a><a class="docs-heading-anchor-permalink" href="#Note-on-installing" title="Permalink"></a></h4><p>When DataCurator builds, it will try to use your existing Python installation. If the environment variable PYTHON is defined, then DataCurator will asume you have installed all dependencies:</p><pre><code class="language-bash hljs">apt install python3 -y
apt install python3-pip -y
pip3 install smlmvis
pip3 install meshio
export PYTHON=`which python3`
julia -e &#39;using Pkg, Pkg.build(&quot;DataCurator&quot;)&#39;</code></pre><p>If you want DataCurator to install Python in a self-contained env, then do</p><pre><code class="language-bash hljs">unset PYTHON
# or export PYTHON=&quot;&quot;
julia -e ...</code></pre><p>See also [deps/build.jl] for how this is configured, if you want finer grained control.</p><h3 id="Using-R-in-templates"><a class="docs-heading-anchor" href="#Using-R-in-templates">Using R in templates</a><a id="Using-R-in-templates-1"></a><a class="docs-heading-anchor-permalink" href="#Using-R-in-templates" title="Permalink"></a></h3><p>You can use R functions</p><pre><code class="language-julia hljs">using DataCurator
p=lookup(&quot;R.base.sum&quot;)
isnothing(p) == false #</code></pre><p>Now you can do in a template</p><pre><code class="language-toml hljs">actions=[&quot;R.base.sum&quot;]</code></pre><p>This assumes R is installed, if not DC will try to install it. Installing your own R packages is beyond scope of this documentation, if it is available in your R install, the above will work. See <a href="https://github.com/JuliaInterop/RCall.jl">RCall.jl</a>.</p><h3 id="Extending-DataCurator"><a class="docs-heading-anchor" href="#Extending-DataCurator">Extending DataCurator</a><a id="Extending-DataCurator-1"></a><a class="docs-heading-anchor-permalink" href="#Extending-DataCurator" title="Permalink"></a></h3><p>If you want to add support for your own datatypes or functions, the only thing you need is to make them available to DataCurator. More formally, they need to be in scope.</p><pre><code class="language-julia hljs">using DataCurator
function load_newtype(filename)
        ## Your code here
end
# or
using MyPackage

load_newtype = MyPackage.load_mydata</code></pre><p>Then</p><pre><code class="language-toml hljs">actions=[&quot;load_newtype&quot;]</code></pre><p>Parameter passing will work, but if you need to change the signature or predefine parameters, you can do so to:</p><pre><code class="language-julia hljs">using DataCurator
function sum_threshold(xs, threshold)
        sum(xs[xs .&gt;= threshold])
end
sum_short = x -&gt; sum_threshold(x, 1)</code></pre><p>then this is equivalent</p><pre><code class="language-toml hljs">actions=[[&quot;sum_threshold&quot;, 1]]</code></pre><p>to</p><pre><code class="language-toml hljs">actions=[&quot;sum_short&quot;]</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="remote.html">« Remote configuration</a><a class="docs-footer-nextpage" href="reference.html">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Wednesday 8 February 2023 17:24">Wednesday 8 February 2023</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
